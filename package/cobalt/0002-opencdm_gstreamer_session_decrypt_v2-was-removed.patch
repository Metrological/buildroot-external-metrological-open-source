From 116f8c7dd9c0bb7693f3caad71e7650d4d7b1bf6 Mon Sep 17 00:00:00 2001
From: Bram Oosterhuis <bram.oosterhuis.nl@gmail.com>
Date: Fri, 23 Sep 2022 18:46:10 +0200
Subject: [PATCH 2/2] opencdm_gstreamer_session_decrypt_v2 was removed

---
 .../starboard/wpe/shared/drm/drm_system_ocdm.cc           | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/src/third_party/starboard/wpe/shared/drm/drm_system_ocdm.cc b/src/third_party/starboard/wpe/shared/drm/drm_system_ocdm.cc
index 83c2dc462b..e23aab9c3d 100755
--- a/src/third_party/starboard/wpe/shared/drm/drm_system_ocdm.cc
+++ b/src/third_party/starboard/wpe/shared/drm/drm_system_ocdm.cc
@@ -648,9 +648,11 @@ bool DrmSystemOcdm::Decrypt(const std::string& id,
   else if(drm_info->encryption_scheme == kSbDrmEncryptionSchemeAesCbc) {
       encScheme = AesCbc_Cbcs;
   }
-  retVal = opencdm_gstreamer_session_decrypt_v2(session->OcdmSession(), buffer,
-                                           sub_sample, subsamples_count, encScheme, encPattern, iv,
-                                           key, 0) == ERROR_NONE;
+
+  retVal = opencdm_gstreamer_session_decrypt(session->OcdmSession(), buffer,
+                                           sub_sample, subsamples_count, iv,
+                                           key, false) == ERROR_NONE;
+
   #else
   retVal = opencdm_gstreamer_session_decrypt(session->OcdmSession(), buffer,
                                            sub_sample, subsamples_count, iv,
-- 
2.34.1

