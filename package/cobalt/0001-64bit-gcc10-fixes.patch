From 5873749a7a39e5d9164f2cbd38efa0a7713e5df3 Mon Sep 17 00:00:00 2001
From: Bram Oosterhuis <bram.oosterhuis.nl@gmail.com>
Date: Fri, 23 Sep 2022 18:45:16 +0200
Subject: [PATCH 1/2] 64bit gcc10 fixes

---
 src/cobalt/browser/memory_settings/auto_mem.cc                | 2 +-
 src/starboard/shared/linux/cpu_features_get.cc                | 2 ++
 .../wpe/shared/audio_sink/gstreamer_audio_sink_type.cc        | 4 ++--
 3 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/src/cobalt/browser/memory_settings/auto_mem.cc b/src/cobalt/browser/memory_settings/auto_mem.cc
index 02e7140fec..566332181c 100644
--- a/src/cobalt/browser/memory_settings/auto_mem.cc
+++ b/src/cobalt/browser/memory_settings/auto_mem.cc
@@ -100,7 +100,7 @@ std::unique_ptr<MemorySettingType> CreateMemorySetting(
       new MemorySettingType(setting_name));
   SetMemorySetting(command_line_setting, build_setting, autoset_value,
                    output.get());
-  return std::move(output);
+  return output;
 }
 
 std::unique_ptr<IntSetting> CreateSystemMemorySetting(
diff --git a/src/starboard/shared/linux/cpu_features_get.cc b/src/starboard/shared/linux/cpu_features_get.cc
index 3f5b98b081..6dd2c5963c 100644
--- a/src/starboard/shared/linux/cpu_features_get.cc
+++ b/src/starboard/shared/linux/cpu_features_get.cc
@@ -367,6 +367,7 @@ bool HasItemInList(const char* list, const char* flag) {
   return false;
 }
 
+#if SB_IS(32_BIT)
 // Construct hwcap bitmask by the feature flags in /proc/cpuinfo
 uint32_t ConstructHwcapFromCPUInfo(ProcCpuInfo* cpu_info,
                                    int16_t architecture_generation,
@@ -411,6 +412,7 @@ uint32_t ConstructHwcapFromCPUInfo(ProcCpuInfo* cpu_info,
   }
   return hwcap_value;
 }
+#endif
 
 bool SbCPUFeaturesGet_ARM(SbCPUFeatures* features) {
   memset(features, 0, sizeof(*features));
diff --git a/src/third_party/starboard/wpe/shared/audio_sink/gstreamer_audio_sink_type.cc b/src/third_party/starboard/wpe/shared/audio_sink/gstreamer_audio_sink_type.cc
index cc7bb9e7e5..81bdac8a98 100644
--- a/src/third_party/starboard/wpe/shared/audio_sink/gstreamer_audio_sink_type.cc
+++ b/src/third_party/starboard/wpe/shared/audio_sink/gstreamer_audio_sink_type.cc
@@ -334,7 +334,7 @@ void GStreamerAudioSink::AppSrcNeedData(GstAppSrc* src,
                                offset_in_frames * sink->GetBytesPerFrame();
           gst_buffer_fill(buffer, 0, beginning,
                           frames_to_write * sink->GetBytesPerFrame());
-          GST_DEBUG_OBJECT(sink->pipeline_, "Pushing %d frames (%d bytes)",
+          GST_DEBUG_OBJECT(sink->pipeline_, "Pushing %d frames (%ld bytes)",
                            frames_to_write,
                            frames_to_write * sink->GetBytesPerFrame());
           auto timestamp = gst_util_uint64_scale(
@@ -354,7 +354,7 @@ void GStreamerAudioSink::AppSrcNeedData(GstAppSrc* src,
 
           GST_DEBUG_OBJECT(sink->pipeline_,
                            "Update consumed by %d. Total %d"
-                           "(%d b)",
+                           "(%ld b)",
                            frames_to_write, sink->total_frames_,
                            sink->total_frames_ * sink->GetBytesPerFrame());
           sink->consume_frame_func_(frames_to_write,
-- 
2.34.1

